{
  "app-id": "com.github.jpakkane.glyphtracer",
  "runtime": "org.kde.Platform",
  "runtime-version": "5.15-25.08",
  "base": "io.qt.qtwebengine.BaseApp",
  "base-version": "5.15-25.08",
  "sdk": "org.kde.Sdk",
  "command": "glyphtracer",
  "finish-args": [
    "--share=ipc", "--socket=fallback-x11",
    "--socket=wayland",
    "--device=dri",
    "--filesystem=xdg-documents",
    "--filesystem=xdg-pictures",
    "--env=PYTHONPATH=/app/utils/lib/python3.13/site-packages"
  ],
  "modules": [
    "pypi-dependencies.json",
    {
      "name": "potrace",
      "config-opts": ["--with-libpotrace"],
      "build-options": {
          "env": {
              "CC": "gcc"
          }
      },
      "sources": [
          {
              "type": "archive",
              "url": "https://downloads.sourceforge.net/project/potrace/1.16/potrace-1.16.tar.gz",
              "sha256": "be8248a17dedd6ccbaab2fcc45835bb0502d062e40fbded3bc56028ce5eb7acc"
          }
      ]
    },
    {
      "name": "python3-Pillow",
      "buildsystem": "simple",
      "build-commands": [
        "pip3 install --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} Pillow"
      ],
      "sources": [
          {
              "type": "file",
              "url": "https://files.pythonhosted.org/packages/39/47/f28067b187dd664d205f75b07dcc6e0e95703e134008a14814827eebcaab/Pillow-7.0.0.tar.gz",
              "sha256": "4d9ed9a64095e031435af120d3c910148067087541131e82b3e8db302f4c8946"
          }
      ]
    },
    {
      "name": "python3-reportlab",
      "buildsystem": "simple",
      "build-commands": [
        "pip3 install --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} reportlab"
      ],
      "sources": [
          {
              "type": "file",
              "url": "https://files.pythonhosted.org/packages/0f/0b/bce8f4a6641c30889fd82b50665f0f7521d633bfd3360af2c11b8b2200af/reportlab-3.5.34.tar.gz",
              "sha256": "9675a26d01ec141cb717091bb139b6227bfb3794f521943101da50327bff4825"
          }
      ]
    },
    {
      "name": "glyphtracer",
      "buildsystem": "simple",
      "build-commands": [
        "install glyphtracer.py /app/bin/glyphtracer",
        "install -Dm644 com.github.jpakkane.glyphtracer.desktop /app/share/applications/com.github.jpakkane.glyphtracer.desktop",
        "install -Dm644 com.github.jpakkane.glyphtracer.metainfo.xml /app/share/metainfo/com.github.jpakkane.glyphtracer.metainfo.xml",
        "install -Dm644 com.github.jpakkane.glyphtracer.svg /app/share/icons/hicolor/scalable/apps/com.github.jpakkane.glyphtracer.svg",
        "python3 setup.py install --prefix=/app --root=/"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/jpakkane/glyphtracer/releases/download/2.0/glyphtracer-2.0.tar.gz",
          "sha256": "4927b5436a5a7389211cc641866c3ab7e70536c43f7105712da74e469e5826bc"
        },
        {
          "type": "file",
          "path": "com.github.jpakkane.glyphtracer.metainfo.xml"
        },
        {
          "type": "file",
          "path": "com.github.jpakkane.glyphtracer.svg"
        },

        {
          "type": "file",
          "path": "com.github.jpakkane.glyphtracer.desktop"
        }
      ]
    }
  ]
}
